# Chapter 04. TDD 기능 명세 및 설계

---
## 1. 기능 명세
- 기능에 대한 명세는 다양한 **형태**로 존재합니다.
  - PPT를 이용한 스토리보드
  - 이메일을 통한 텍스트
  - Jira와 같은 이슈 트래킹 시스템   

    
- 기능 명세는 크게 두 가지 형태로 **구분**할 수 있습니다.
  - **입력**: 기능이 처리할 데이터
  - **결과**: 기능이 반환할 데이터 


- 예시 1) **만료일 계산 예시**
  - **입력**: 첫 납부일, 납부액
  - **결과**: 만료일


- 예시 2) **회원가입 기능 예시**
  - **입력**: 아이디, 암호, 이름, 이메일
  - **결과**: 아이디와 암호가 일치하면 성공, 틀리면 실패, DuplicateIdException 발생 OR 회원정보 저장, 회원 일련 번호 리턴
---
## 2. 설계 과정을 지원하는 TDD 
- TDD는 테스트 코드 작성에서부터 시작합니다. 테스트 코드를 먼저 만들고, 테스트를 통과시키기 위한 코드를 구현하고, 리팩토링을 진행합니다.

### (1) 테스트 코드를 작성하기 위한 조건
- **테스트할 기능 실행**
- **실행 결과 검증**


### (2) 테스트를 위한 설계
- 테스트를 작성하는 과정에서 다음 사항들을 고민하게 됩니다.
  - 클래스와 메서드 이름
  - 메서드의 인자 타입과 갯수
  - 리턴 타입

- 이 과정은 자연스럽게 **설계 과정**으로 이어집니다.
---
## 3. 이름 설계의 중요성
- 이름은 클래스와 메서드의 역할과 책임을 나타내는 중요한 요소입니다. 
- 역할, 책임, 기능을 명확하게 드러낼 수 있도록 네이밍에 많은 시간을 투자해야 합니다.

### (1) 필요한 만큼 설계하기
- TDD에서는 테스트를 통과시키는 데 필요한 만큼의 코드만 작성합니다. 필요할 것 같다고 예측해서 코드를 작성하지 않습니다. 
- 유연한 설계는 필요한 시점에 추가합니다.

### (2) YAGNI 원칙
- "You Ain't Gonna Need It" 
- 필요하지 않은 기능을 미리 구현하지 말라는 원칙입니다. 
---
## 4. 기능 명세 구체화
- 기능 명세를 구체화하기 위해서는 입력과 결과를 명확히 정의해야 합니다. 
- 다양한 예외 상황을 처리하기 위해 기획자나 실무 담당자와 소통하여 기능 명세를 구체화합니다.

### (1) 만료일 계산 기능 예제
- **요구 사항**:
    - 매달 1만 원 선불 납부
    - 납부일 기준 1달 뒤 서비스 만료
    - 2개월 이상 요금 납부 가능
    - 10만 원 납부 시 1년 서비스 제공

- **애매한 부분**:
    - 달마다 다른 마지막 날짜
    - 특정 날짜에 납부 시 만료일 처리 방식

=> 개발자는 이러한 애매한 부분을 기획자와 논의하여 구체적인 예를 찾아야 합니다.

### (2) 예시 질문
- 4월 1일에 1만 원 납부 시 4월 30일에 만료인가요, 5월 1일에 만료인가요?
- 1월 31일에 납부 시 2월 28일에 만료인가요, 3월 3일에 만료인가요?
- 1월 29일이나 30일에 납부 시 만료일은 언제인가요? 윤년이면?
- 납부일이 다음 달 말일보다 큰 경우 만료일은?

### (3) 추가 질문
- 1월 31일에 납부 후 2만 원 추가 납부 시 만료일은?   


=> 이런 질문을 통해 구체적으로 기능을 명세하고, 테스트 코드로 명세를 작성합니다.  
=> 구체적인 테스트 코드는 애플리케이션의 기능에 대한 명세가 되어 줍니다.
---
## 5. 결론
- TDD를 통해 기능 명세를 구체화하고, 테스트 코드를 작성하여 명확한 기능을 구현할 수 있습니다. 
- 기획자와의 소통을 통해 애매한 부분을 해소하고, 테스트 코드를 통해 올바르게 동작하는 기능을 만들 수 있습니다.
---
## # 생각해보기
### Q 01. 기획자나 실무 담당자와 기능 명세를 구체화한 경험 중 가장 기억에 남는 사례는 무엇인가요?

- 